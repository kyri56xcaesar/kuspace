apiVersion: v1
kind: ConfigMap
metadata:
  name: uspace-config
  namespace: kuspace
data:
  uspace.conf: |
    J_MAX_CPU=1
    API_LOGS_PATH=data/logs/uspace/
    DB_FSL_PATH=data/db/uspace
    DB_FSL_MAX_IDLE_CONNS=10
    DB_JOBS=jobs.db
    DB_JOBS_MAX_OPEN_CONNS=50
    API_PORT=8079
    ALLOWED_METHODS=*
    PROFILE=container
    DB_FSL_DRIVER=duckdb
    FSL_LOCALITY=false
    J_MAX_WORKERS=10
    ALLOWED_HEADERS=*
    NAMESPACE=kuspace
    J_MAX_STORAGE=4
    DB_JOBS_MAX_IDLE_LIFETIME=10
    API_ADDRESS=uspace
    AUTH_PORT=9090
    LOCAL_VOLUMES_DEFAULT_PATH=data/volumes
    OBJECT_SHARED=true
    OBJECT_SHARE_EXPIRE=1440
    DB_JOBS_MAX_IDLE_CONNS=10
    OBJECT_SIZE_THRESHOLD=400000000
    FRONT_ADDRESS=frontapp
    JWT_VALIDITY_HOURS=1
    STORAGE_SYSTEM=minio
    MINIO_ENDPOINT=minio:9000
    FSL_SERVER=false
    MINIO_USE_SSL=false
    J_QUEUE_SIZE=100
    J_EXECUTOR=kubernetes
    J_MAX_LOGIC_CHARS=1000000
    FRONT_PORT=8080
    DB_FSL=fsl.db
    ONLY_PRESIGNED_UPLOAD=true
    API_LOGS_MAX_SIZE=100
    ALLOWED_ORIGINS=*
    MINIOTH_ACCESS_KEY=kuspaceadmin
    J_MAX_PARALLELISM=4
    J_MAX_TIMEOUT=10
    DB_FSL_MAX_IDLE_LIFETIME=10
    DB_JOBS_PATH=data/db/uspace
    AUTH_ADDRESS=minioth
    VERBOSE=true
    LOCAL_VOLUMES_DEFAULT_CAPACITY=-1
    MINIO_DEFAULT_BUCKET=uspace-default
    J_DISPATCHER=scheduler
    API_GIN_MODE=release
    J_WS_ADDRESS=wss:8082
    J_WS_LOGS_PATH=data/logs/jobs/
    DB_FSL_MAX_OPEN_CONNS=50
    MINIO_ACCESS_KEY=minioadmin
    MINIO_OBJECT_LOCKING=false
    J_MAX_MEM=33000
    DB_JOBS_DRIVER=duckdb
    IP=0.0.0.0
    MINIO_NODEPORT_ENDPOINT=localhost:30101
